<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Urban - Future Real Estate</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.9.4/leaflet.css" />
    <style>
        :root {
            --primary: #00d4ff;
            --secondary: #06b6d4;
            --accent: #8b5cf6;
            --bg-dark: #0f172a;
            --bg-darker: #020617;
            --surface: #1e293b;
            --surface-light: #334155;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--bg-darker) 0%, var(--bg-dark) 50%, #1e1b4b 100%);
            color: var(--text-primary);
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        /* Animated background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 20%, rgba(0, 212, 255, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 80% 80%, rgba(139, 92, 246, 0.1) 0%, transparent 50%),
                radial-gradient(circle at 40% 60%, rgba(6, 182, 212, 0.05) 0%, transparent 50%);
            animation: backgroundPulse 10s ease-in-out infinite alternate;
            pointer-events: none;
            z-index: -1;
        }
        
        @keyframes backgroundPulse {
            0% { opacity: 0.3; }
            100% { opacity: 0.7; }
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
        }
        
        /* Glassmorphism Header */
        header {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 212, 255, 0.2);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            font-size: 1.8rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .logo::before {
            content: 'üè†';
            font-size: 2rem;
            filter: hue-rotate(200deg) brightness(1.5);
        }
        
        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }
        
        .nav-links a {
            text-decoration: none;
            color: var(--text-secondary);
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }
        
        .nav-links a::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 212, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .nav-links a:hover {
            color: var(--primary);
            background: rgba(0, 212, 255, 0.1);
            transform: translateY(-2px);
        }
        
        .nav-links a:hover::before {
            left: 100%;
        }
        
        /* Auth buttons */
        .auth-buttons {
            display: flex;
            gap: 1rem;
        }
        
        .auth-btn {
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .login-btn {
            background: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }
        
        .login-btn:hover {
            background: rgba(0, 212, 255, 0.1);
        }
        
        .register-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none;
            color: var(--bg-dark);
        }
        
        .register-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3);
        }
        
        /* User menu */
        .user-menu {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
        }
        
        /* Main content */
        .main-content {
            padding: 2rem 0;
        }
        
        /* Page sections */
        .page-section {
            display: none;
        }
        
        .page-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        /* Property cards */
        .properties-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }
        
        .property-card {
            background: rgba(15, 23, 42, 0.9);
            border-radius: 20px;
            overflow: hidden;
            border: 1px solid rgba(0, 212, 255, 0.2);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            position: relative;
        }
        
        .property-card:hover {
            transform: translateY(-10px) scale(1.02);
            border-color: var(--primary);
            box-shadow: 0 25px 50px rgba(0, 212, 255, 0.3);
        }
        
        .property-image {
            height: 220px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            position: relative;
            overflow: hidden;
        }
        
        .property-info {
            padding: 2rem;
        }
        
        .property-price {
            font-size: 1.8rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }
        
        .property-title {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        
        .property-location {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .property-features {
            display: flex;
            gap: 1.5rem;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .property-tag {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: linear-gradient(135deg, var(--success), #059669);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .property-tag.rent {
            background: linear-gradient(135deg, var(--warning), #d97706);
        }
        
        /* Forms */
        .form-section {
            background: rgba(15, 23, 42, 0.9);
            padding: 2rem;
            border-radius: 16px;
            margin-bottom: 2rem;
            border: 1px solid rgba(0, 212, 255, 0.2);
            max-width: 800px;
            margin: 0 auto;
        }
        
        .form-section h3 {
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 1rem;
            background: rgba(30, 41, 59, 0.9);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 8px;
            color: var(--text-primary);
            outline: none;
            transition: all 0.3s;
        }
        
        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }
        
        .submit-btn {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--bg-dark);
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            font-weight: 700;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 212, 255, 0.4);
        }
        
        /* Auth Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(10px);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: var(--bg-dark);
            border-radius: 20px;
            padding: 2rem;
            width: 90%;
            max-width: 500px;
            border: 1px solid rgba(0, 212, 255, 0.3);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
            position: relative;
        }
        
        .close-modal {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .auth-tabs {
            display: flex;
            margin-bottom: 2rem;
            border-bottom: 1px solid rgba(0, 212, 255, 0.2);
        }
        
        .auth-tab {
            flex: 1;
            padding: 1rem;
            background: none;
            border: none;
            color: var(--text-secondary);
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .auth-tab.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
        }
        
        .auth-form {
            display: none;
        }
        
        .auth-form.active {
            display: block;
        }
        
        /* Property Detail Page */
        .property-detail {
            padding: 2rem 0;
        }
        
        .property-gallery {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        
        .main-image {
            height: 400px;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 5rem;
        }
        
        .thumbnails {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .thumbnail {
            height: 125px;
            background: rgba(30, 41, 59, 0.9);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            cursor: pointer;
        }
        
        .property-detail-content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }
        
        .property-info-detail {
            background: rgba(15, 23, 42, 0.9);
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid rgba(0, 212, 255, 0.2);
        }
        
        .property-sidebar {
            background: rgba(15, 23, 42, 0.9);
            padding: 2rem;
            border-radius: 16px;
            border: 1px solid rgba(0, 212, 255, 0.2);
            height: fit-content;
        }
        
        .agent-info {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .agent-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.5rem;
        }
        
        /* 3D Render Section */
        .render-container {
            height: 400px;
            background: rgba(15, 23, 42, 0.9);
            border-radius: 16px;
            border: 1px solid rgba(0, 212, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 2rem 0;
            position: relative;
            overflow: hidden;
        }
        
        .render-placeholder {
            font-size: 3rem;
            text-align: center;
            color: var(--text-secondary);
        }
        
        .render-controls {
            position: absolute;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 1rem;
        }
        
        .render-btn {
            background: rgba(0, 212, 255, 0.2);
            border: 1px solid var(--primary);
            color: var(--primary);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            cursor: pointer;
            backdrop-filter: blur(10px);
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links { display: none; }
            .properties-grid { grid-template-columns: 1fr; }
            .property-gallery { grid-template-columns: 1fr; }
            .property-detail-content { grid-template-columns: 1fr; }
        }
        
        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(0, 212, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--primary);
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Auth Modal -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeAuthModal()">√ó</button>
            
            <div class="auth-tabs">
                <button class="auth-tab active" onclick="showAuthTab('login')">Login</button>
                <button class="auth-tab" onclick="showAuthTab('register')">Register</button>
            </div>
            
            <form id="loginForm" class="auth-form active" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="loginUsername">Username</label>
                    <input type="text" id="loginUsername" required>
                </div>
                
                <div class="form-group">
                    <label for="loginPassword">Password</label>
                    <input type="password" id="loginPassword" required>
                </div>
                
                <button type="submit" class="submit-btn">Login</button>
            </form>
            
            <form id="registerForm" class="auth-form" onsubmit="handleRegister(event)">
                <div class="form-group">
                    <label for="registerEmail">Email</label>
                    <input type="email" id="registerEmail" required>
                </div>
                
                <div class="form-group">
                    <label for="registerUsername">Username</label>
                    <input type="text" id="registerUsername" required>
                </div>
                
                <div class="form-group">
                    <label for="registerPassword">Password</label>
                    <input type="password" id="registerPassword" required>
                </div>
                
                <div class="form-group">
                    <label for="registerFullName">Full Name</label>
                    <input type="text" id="registerFullName" required>
                </div>
                
                <div class="form-group">
                    <label for="registerPhone">Phone</label>
                    <input type="tel" id="registerPhone">
                </div>
                
                <div class="form-group">
                    <label for="registerIsAgent">
                        <input type="checkbox" id="registerIsAgent">
                        I am a real estate agent
                    </label>
                </div>
                
                <button type="submit" class="submit-btn">Register</button>
            </form>
        </div>
    </div>

    <header>
        <nav class="container">
            <div class="logo">Urban</div>
            <ul class="nav-links">
                <li><a href="#" onclick="showPage('home')">üè† Home</a></li>
                <li><a href="#" onclick="showPage('properties')">üîç Properties</a></li>
                <li><a href="#" onclick="showPage('agents')">üë®‚Äçüíº Agents</a></li>
                <li><a href="#" onclick="showPage('about')">‚ÑπÔ∏è About</a></li>
            </ul>
            
            <div class="auth-buttons" id="authButtons">
                <button class="auth-btn login-btn" onclick="openAuthModal()">Login</button>
                <button class="auth-btn register-btn" onclick="openAuthModal()">Register</button>
            </div>
            
            <div class="user-menu" id="userMenu" style="display: none;">
                <div class="user-avatar" id="userAvatar">U</div>
                <button class="auth-btn login-btn" onclick="logout()">Logout</button>
            </div>
        </nav>
    </header>

    <main class="container main-content">
        <!-- Home Page -->
        <section id="home" class="page-section active">
            <div class="hero">
                <h1>Future of Real Estate</h1>
                <p class="hero-subtitle">AI-powered property discovery with immersive visualization</p>
                
                <div class="ai-search">
                    <div class="search-row">
                        <input type="text" class="search-input" placeholder="üåç Enter location or landmark...">
                        <select class="search-input">
                            <option value="">üè† All Property Types</option>
                            <option value="house">üè° Houses</option>
                            <option value="apartment">üè¢ Apartments</option>
                            <option value="condo">üè¨ Condos</option>
                            <option value="commercial">üè™ Commercial</option>
                            <option value="luxury">üíé Luxury</option>
                        </select>
                    </div>
                    <div class="search-row">
                        <select class="search-input">
                            <option value="">üí∞ Any Price</option>
                            <option value="0-200000">$0 - $200k</option>
                            <option value="200000-500000">$200k - $500k</option>
                            <option value="500000-1000000">$500k - $1M</option>
                            <option value="1000000+">$1M+</option>
                        </select>
                        <select class="search-input">
                            <option value="">üìã Buy or Rent</option>
                            <option value="sale">üè† For Sale</option>
                            <option value="rent">üè¢ For Rent</option>
                        </select>
                        <button class="ai-search-btn">
                            <span>ü§ñ AI Search</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number">2.5K+</div>
                    <div class="stat-label">Properties Listed</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">1.8K+</div>
                    <div class="stat-label">Happy Clients</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">15+</div>
                    <div class="stat-label">Cities Covered</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">95%</div>
                    <div class="stat-label">Satisfaction Rate</div>
                </div>
            </div>

            <h2 style="margin: 3rem 0 1.5rem 0;">Featured Properties</h2>
            <div class="properties-grid">
                <div class="property-card" onclick="viewProperty(1)">
                    <div class="property-image">üèôÔ∏è</div>
                    <div class="property-tag">sale</div>
                    <div class="property-info">
                        <div class="property-price">$1,250,000</div>
                        <div class="property-title">Modern Penthouse</div>
                        <div class="property-location">üìç Manhattan, NYC</div>
                        <div class="property-features">
                            <span>üõèÔ∏è 3 Beds</span>
                            <span>üõÅ 2 Baths</span>
                            <span>üìê 2,500 sq ft</span>
                        </div>
                    </div>
                </div>
                
                <div class="property-card" onclick="viewProperty(2)">
                    <div class="property-image">üè¢</div>
                    <div class="property-tag rent">rent</div>
                    <div class="property-info">
                        <div class="property-price">$4,500/month</div>
                        <div class="property-title">Central Park Apartment</div>
                        <div class="property-location">üìç Upper West Side, NYC</div>
                        <div class="property-features">
                            <span>üõèÔ∏è 2 Beds</span>
                            <span>üõÅ 2 Baths</span>
                            <span>üìê 1,800 sq ft</span>
                        </div>
                    </div>
                </div>
                
                <div class="property-card" onclick="viewProperty(3)">
                    <div class="property-image">üè†</div>
                    <div class="property-tag">sale</div>
                    <div class="property-info">
                        <div class="property-price">$875,000</div>
                        <div class="property-title">Brooklyn Loft</div>
                        <div class="property-location">üìç DUMBO, Brooklyn</div>
                        <div class="property-features">
                            <span>üõèÔ∏è 2 Beds</span>
                            <span>üõÅ 1 Bath</span>
                            <span>üìê 1,400 sq ft</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Properties Page -->
        <section id="properties" class="page-section">
            <h2>All Properties</h2>
            <div class="properties-grid">
                <div class="property-card" onclick="viewProperty(1)">
                    <div class="property-image">üèôÔ∏è</div>
                    <div class="property-tag">sale</div>
                    <div class="property-info">
                        <div class="property-price">$1,250,000</div>
                        <div class="property-title">Modern Penthouse</div>
                        <div class="property-location">üìç Manhattan, NYC</div>
                        <div class="property-features">
                            <span>üõèÔ∏è 3 Beds</span>
                            <span>üõÅ 2 Baths</span>
                            <span>üìê 2,500 sq ft</span>
                        </div>
                    </div>
                </div>
                
                <div class="property-card" onclick="viewProperty(2)">
                    <div class="property-image">üè¢</div>
                    <div class="property-tag rent">rent</div>
                    <div class="property-info">
                        <div class="property-price">$4,500/month</div>
                        <div class="property-title">Central Park Apartment</div>
                        <div class="property-location">üìç Upper West Side, NYC</div>
                        <div class="property-features">
                            <span>üõèÔ∏è 2 Beds</span>
                            <span>üõÅ 2 Baths</span>
                            <span>üìê 1,800 sq ft</span>
                        </div>
                    </div>
                </div>
                
                <div class="property-card" onclick="viewProperty(3)">
                    <div class="property-image">üè†</div>
                    <div class="property-tag">sale</div>
                    <div class="property-info">
                        <div class="property-price">$875,000</div>
                        <div class="property-title">Brooklyn Loft</div>
                        <div class="property-location">üìç DUMBO, Brooklyn</div>
                        <div class="property-features">
                            <span>üõèÔ∏è 2 Beds</span>
                            <span>üõÅ 1 Bath</span>
                            <span>üìê 1,400 sq ft</span>
                        </div>
                    </div>
                </div>
                
                <div class="property-card" onclick="viewProperty(4)">
                    <div class="property-image">üè°</div>
                    <div class="property-tag">sale</div>
                    <div class="property-info">
                        <div class="property-price">$450,000</div>
                        <div class="property-title">Modern Family Home</div>
                        <div class="property-location">üìç Downtown District</div>
                        <div class="property-features">
                            <span>üõèÔ∏è 3 Beds</span>
                            <span>üõÅ 2 Baths</span>
                            <span>üìê 2,100 sq ft</span>
                        </div>
                    </div>
                </div>
                
                <div class="property-card" onclick="viewProperty(5)">
                    <div class="property-image">üè¢</div>
                    <div class="property-tag rent">rent</div>
                    <div class="property-info">
                        <div class="property-price">$1,800/month</div>
                        <div class="property-title">Modern Studio</div>
                        <div class="property-location">üìç Downtown</div>
                        <div class="property-features">
                            <span>üõèÔ∏è 1 Bed</span>
                            <span>üõÅ 1 Bath</span>
                            <span>üìê 600 sq ft</span>
                        </div>
                    </div>
                </div>
                
                <div class="property-card" onclick="viewProperty(6)">
                    <div class="property-image">üèòÔ∏è</div>
                    <div class="property-tag rent">rent</div>
                    <div class="property-info">
                        <div class="property-price">$3,200/month</div>
                        <div class="property-title">Spacious Townhouse</div>
                        <div class="property-location">üìç Quiet Neighborhood</div>
                        <div class="property-features">
                            <span>üõèÔ∏è 4 Beds</span>
                            <span>üõÅ 3 Baths</span>
                            <span>üìê 2,400 sq ft</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Property Detail Page -->
        <section id="property-detail" class="page-section">
            <div class="property-detail">
                <button class="auth-btn login-btn" onclick="showPage('properties')" style="margin-bottom: 2rem;">‚Üê Back to Properties</button>
                
                <div class="property-gallery">
                    <div class="main-image">üèôÔ∏è</div>
                    <div class="thumbnails">
                        <div class="thumbnail">üõãÔ∏è</div>
                        <div class="thumbnail">üç≥</div>
                        <div class="thumbnail">üõÅ</div>
                    </div>
                </div>
                
                <div class="property-detail-content">
                    <div class="property-info-detail">
                        <div class="property-tag">sale</div>
                        <h2>Modern Penthouse</h2>
                        <div class="property-price">$1,250,000</div>
                        <div class="property-location">üìç Manhattan, NYC</div>
                        
                        <div class="property-features" style="margin: 1.5rem 0;">
                            <span>üõèÔ∏è 3 Beds</span>
                            <span>üõÅ 2 Baths</span>
                            <span>üìê 2,500 sq ft</span>
                            <span>üè¢ 12th Floor</span>
                        </div>
                        
                        <h3>Description</h3>
                        <p style="margin: 1rem 0; line-height: 1.6; color: var(--text-secondary);">
                            This stunning modern penthouse offers breathtaking views of the city skyline. 
                            Features include floor-to-ceiling windows, a gourmet kitchen with premium appliances, 
                            a spacious living area, and a private terrace. The master suite includes a walk-in closet 
                            and a luxurious bathroom with a soaking tub. Located in the heart of Manhattan, 
                            this property is just steps away from fine dining, shopping, and entertainment.
                        </p>
                        
                        <h3>3D Virtual Tour</h3>
                        <div class="render-container">
                            <div class="render-placeholder">
                                <div>üè†</div>
                                <p>3D Virtual Tour</p>
                            </div>
                            <div class="render-controls">
                                <button class="render-btn">üîÑ Rotate</button>
                                <button class="render-btn">üëÜ Interact</button>
                                <button class="render-btn">üëì VR View</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="property-sidebar">
                        <h3>Contact Agent</h3>
                        <div class="agent-info">
                            <div class="agent-avatar">J</div>
                            <div>
                                <div style="font-weight: bold;">John Smith</div>
                                <div style="color: var(--text-secondary);">Urban Real Estate</div>
                            </div>
                        </div>
                        
                        <form>
                            <div class="form-group">
                                <input type="text" placeholder="Your Name" required>
                            </div>
                            <div class="form-group">
                                <input type="email" placeholder="Your Email" required>
                            </div>
                            <div class="form-group">
                                <input type="tel" placeholder="Your Phone">
                            </div>
                            <div class="form-group">
                                <textarea placeholder="Message" rows="4" required></textarea>
                            </div>
                            <button type="submit" class="submit-btn">Send Message</button>
                        </form>
                    </div>
                </div>
            </div>
        </section>

        <!-- Agent Dashboard Page -->
        <section id="agent-dashboard" class="page-section">
            <h2>Agent Dashboard</h2>
            
            <div class="form-section">
                <h3>Create New Property Listing</h3>
                <form id="propertyForm" onsubmit="submitProperty(event)">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="propertyTitle">Property Title</label>
                            <input type="text" id="propertyTitle" required>
                        </div>
                        <div class="form-group">
                            <label for="propertyType">Listing Type</label>
                            <select id="propertyType" required>
                                <option value="sale">For Sale</option>
                                <option value="rent">For Rent</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="propertyCategory">Property Type</label>
                            <select id="propertyCategory" required>
                                <option value="house">House</option>
                                <option value="apartment">Apartment</option>
                                <option value="condo">Condo</option>
                                <option value="commercial">Commercial</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="propertyPrice">Price</label>
                            <input type="number" id="propertyPrice" required>
                        </div>
                        <div class="form-group">
                            <label for="propertyBedrooms">Bedrooms</label>
                            <input type="number" id="propertyBedrooms" required>
                        </div>
                        <div class="form-group">
                            <label for="propertyBathrooms">Bathrooms</label>
                            <input type="number" id="propertyBathrooms" required>
                        </div>
                        <div class="form-group">
                            <label for="propertySqft">Square Feet</label>
                            <input type="number" id="propertySqft" required>
                        </div>
                        <div class="form-group">
                            <label for="propertyLocation">Location</label>
                            <input type="text" id="propertyLocation" required>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="propertyDescription">Description</label>
                        <textarea id="propertyDescription" rows="4" required></textarea>
                    </div>
                    
                    <div class="form-group">
                        <label for="propertyImages">Upload Images</label>
                        <input type="file" id="propertyImages" multiple accept="image/*">
                    </div>
                    
                    <div class="form-group">
                        <label for="property3D">Upload 3D Model (optional)</label>
                        <input type="file" id="property3D" accept=".glb,.gltf">
                    </div>
                    
                    <button type="submit" class="submit-btn">Create Listing</button>
                </form>
            </div>
            
            <h3 style="margin-top: 3rem;">My Listings</h3>
            <div class="properties-grid">
                <div class="property-card">
                    <div class="property-image">üèôÔ∏è</div>
                    <div class="property-tag">sale</div>
                    <div class="property-info">
                        <div class="property-price">$1,250,000</div>
                        <div class="property-title">Modern Penthouse</div>
                        <div class="property-location">üìç Manhattan, NYC</div>
                        <div class="property-features">
                            <span>üõèÔ∏è 3 Beds</span>
                            <span>üõÅ 2 Baths</span>
                            <span>üìê 2,500 sq ft</span>
                        </div>
                    </div>
                </div>
                
                <div class="property-card">
                    <div class="property-image">üè†</div>
                    <div class="property-tag">sale</div>
                    <div class="property-info">
                        <div class="property-price">$875,000</div>
                        <div class="property-title">Brooklyn Loft</div>
                        <div class="property-location">üìç DUMBO, Brooklyn</div>
                        <div class="property-features">
                            <span>üõèÔ∏è 2 Beds</span>
                            <span>üõÅ 1 Bath</span>
                            <span>üìê 1,400 sq ft</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Other pages would go here -->
        <section id="agents" class="page-section">
            <h2>Our Agents</h2>
            <p>Meet our professional real estate agents.</p>
        </section>
        
        <section id="about" class="page-section">
            <h2>About Urban</h2>
            <p>Learn about our mission and vision.</p>
        </section>
    </main>

    <script>
        // Global variables
        let authToken = localStorage.getItem('urban_auth_token');
        let currentUser = JSON.parse(localStorage.getItem('urban_user') || 'null');
        
        // Backend API URL
        const API_BASE_URL = 'https://urban-backend-jhyb.onrender.com';
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            // Check authentication status
            checkAuthStatus();
            
            // Check if we're viewing a specific property from URL
            checkUrlParams();
        });

        // Check URL parameters for property viewing
        function checkUrlParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const propertyId = urlParams.get('property');
            const agentId = urlParams.get('agent');
            
            if (propertyId) {
                viewProperty(propertyId, agentId);
            }
        }

        // Check authentication status and update UI
        function checkAuthStatus() {
            const authButtons = document.getElementById('authButtons');
            const userMenu = document.getElementById('userMenu');
            const userAvatar = document.getElementById('userAvatar');
            
            if (authToken && currentUser) {
                authButtons.style.display = 'none';
                userMenu.style.display = 'flex';
                
                // Set user avatar initial
                if (currentUser.full_name) {
                    userAvatar.textContent = currentUser.full_name.charAt(0).toUpperCase();
                }
                
                // Show agent dashboard link if user is an agent
                updateNavForAgent();
            } else {
                authButtons.style.display = 'flex';
                userMenu.style.display = 'none';
            }
        }

        // Update navigation for agent users
        function updateNavForAgent() {
            const navLinks = document.querySelector('.nav-links');
            
            if (currentUser && currentUser.is_agent) {
                // Check if agent dashboard link already exists
                if (!document.querySelector('.agent-dashboard-link')) {
                    const agentLink = document.createElement('li');
                    agentLink.innerHTML = '<a href="#" class="agent-dashboard-link" onclick="showPage(\'agent-dashboard\')">üìä Dashboard</a>';
                    navLinks.appendChild(agentLink);
                }
            }
        }

        // Authentication functions
        function openAuthModal() {
            document.getElementById('authModal').style.display = 'flex';
        }

        function closeAuthModal() {
            document.getElementById('authModal').style.display = 'none';
        }

        function showAuthTab(tabName) {
            document.querySelectorAll('.auth-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.auth-form').forEach(form => form.classList.remove('active'));
            
            document.querySelector(`.auth-tab[onclick="showAuthTab('${tabName}')"]`).classList.add('active');
            document.getElementById(`${tabName}Form`).classList.add('active');
        }

        async function handleLogin(event) {
            event.preventDefault();
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            try {
                const response = await fetch(`${API_BASE_URL}/auth/login`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ username, password })
                });
                
                if (!response.ok) {
                    throw new Error('Login failed');
                }
                
                const data = await response.json();
                authToken = data.access_token;
                localStorage.setItem('urban_auth_token', authToken);
                
                // Get user info from token
                const tokenPayload = JSON.parse(atob(authToken.split('.')[1]));
                
                // In a real app, you'd fetch user details from the backend
                currentUser = {
                    id: tokenPayload.id,
                    username: tokenPayload.sub,
                    full_name: "John Smith", // This would come from the backend
                    is_agent: true, // This would come from the backend
                    has_active_subscription: true // This would come from the backend
                };
                
                localStorage.setItem('urban_user', JSON.stringify(currentUser));
                
                closeAuthModal();
                checkAuthStatus();
                alert('Login successful!');
                
            } catch (error) {
                alert('Login failed: ' + error.message);
            }
        }

        async function handleRegister(event) {
            event.preventDefault();
            const email = document.getElementById('registerEmail').value;
            const username = document.getElementById('registerUsername').value;
            const password = document.getElementById('registerPassword').value;
            const full_name = document.getElementById('registerFullName').value;
            const phone = document.getElementById('registerPhone').value;
            const is_agent = document.getElementById('registerIsAgent').checked;
            
            try {
                const response = await fetch(`${API_BASE_URL}/auth/register`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, username, password, full_name, phone, is_agent })
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error || 'Registration failed');
                }
                
                alert('Registration successful! Please login.');
                showAuthTab('login');
                
            } catch (error) {
                alert('Registration failed: ' + error.message);
            }
        }

        function logout() {
            authToken = null;
            currentUser = null;
            localStorage.removeItem('urban_auth_token');
            localStorage.removeItem('urban_user');
            checkAuthStatus();
            alert('Logged out successfully');
            showPage('home');
        }

        // Page navigation
        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Show selected page
            document.getElementById(pageId).classList.add('active');
            
            // Update URL without reloading page
            window.history.pushState({}, '', `?page=${pageId}`);
        }

        // Property viewing
        function viewProperty(propertyId, agentId = null) {
            // If we have an agent ID, construct a shareable URL
            if (agentId) {
                window.history.pushState({}, '', `?property=${propertyId}&agent=${agentId}`);
            } else {
                window.history.pushState({}, '', `?property=${propertyId}`);
            }
            
            showPage('property-detail');
        }

        // Property submission
        async function submitProperty(event) {
            event.preventDefault();
            
            // Check if user is authenticated and is an agent
            if (!authToken || !currentUser) {
                alert('Please login to list a property');
                openAuthModal();
                return;
            }
            
            if (!currentUser.is_agent) {
                alert('You need to be a registered agent to list properties');
                return;
            }
            
            // Check if agent has active subscription
            if (!currentUser.has_active_subscription) {
                alert('You need an active subscription to list properties. Please contact support.');
                return;
            }
            
            // Get form data
            const title = document.getElementById('propertyTitle').value;
            const listing_type = document.getElementById('propertyType').value;
            const property_type = document.getElementById('propertyCategory').value;
            const price = document.getElementById('propertyPrice').value;
            const bedrooms = document.getElementById('propertyBedrooms').value;
            const bathrooms = document.getElementById('propertyBathrooms').value;
            const sqft = document.getElementById('propertySqft').value;
            const location = document.getElementById('propertyLocation').value;
            const description = document.getElementById('propertyDescription').value;
            
            try {
                const response = await fetch(`${API_BASE_URL}/properties`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${authToken}`
                    },
                    body: JSON.stringify({
                        title,
                        listing_type,
                        property_type,
                        price: parseFloat(price),
                        bedrooms: parseInt(bedrooms),
                        bathrooms: parseInt(bathrooms),
                        sqft: parseInt(sqft),
                        location,
                        description
                    })
                });
                
                if (!response.ok) {
                    throw new Error('Failed to create listing');
                }
                
                const newProperty = await response.json();
                alert('üöÄ Property listed successfully!');
                
                // Reset form
                document.getElementById('propertyForm').reset();
                
            } catch (error) {
                alert('Failed to list property: ' + error.message);
            }
        }

        // Generate shareable link for agent's property
        function generateShareableLink(propertyId) {
            return `${window.location.origin}${window.location.pathname}?property=${propertyId}&agent=${currentUser.id}`;
        }
    </script>
</body>
</html>
